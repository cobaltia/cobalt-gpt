// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model Guild {
  id                  String @id @map("id") @db.VarChar(18)
  numOfSuccessfulRuns Int    @default(0) @map("num_of_successful_runs")
  numOfFailedRuns     Int    @default(0) @map("num_of_failed_runs")
  imagesGenerated     Int    @default(0) @map("images_generated")
  infractions         Int    @default(0) @map("infractions")
  User                User[]

  @@map("guilds")
}

model User {
  id                  String @map("id") @db.VarChar(18)
  numOfSuccessfulRuns Int    @default(0) @map("num_of_successful_runs")
  numOfFailedRuns     Int    @default(0) @map("num_of_failed_runs")
  imagesGenerated     Int    @default(0) @map("images_generated")
  infractions         Int    @default(0) @map("infractions")
  guild               Guild  @relation(fields: [guildId], references: [id], onDelete: Cascade)
  guildId             String @map("guild_id") @db.VarChar(18)

  @@id([id, guildId], name: "userId", map: "user_id")
  @@map("users")
}
